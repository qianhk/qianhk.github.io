<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>钱凯凯</title>
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url()">
        <div class='av-pic' style="background-image: url(/assets/avatar.jpg)">
        </div>
    </section>
    <section class='menu'>
        <div>钱凯凯</div>
        
            <div>钱凯凯的博客</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
            
                <a href="https://github.com/qianhk">
                    <img src="/assets/github.svg" />
                </a>
            
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <div>
  <article class='ContentView'>
    <header class='PageTitle'>
        <h1></h1>
    </header>

    <section>
      <h2 id="客户端码农学习ML-——-Numpy基本用法"><a href="#客户端码农学习ML-——-Numpy基本用法" class="headerlink" title="客户端码农学习ML —— Numpy基本用法"></a>客户端码农学习ML —— Numpy基本用法</h2><p>本文总结下numpy中基本用法，脚本首先import numpy as np。</p>
<h3 id="创建矩阵"><a href="#创建矩阵" class="headerlink" title="创建矩阵"></a>创建矩阵</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.array([1, 2, 3])</span><br><span class="line"></span><br><span class="line">输出 [1 2 3]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">np.array([(1, 2, 3), (4, 5, 6)], dtype=np.int32)</span><br><span class="line"></span><br><span class="line">指定类型int32，输出</span><br><span class="line">[[1 2 3]</span><br><span class="line"> [4 5 6]]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">np.zeros((2, 3))</span><br><span class="line">np.ones((2, 3), dtype=int)</span><br><span class="line"></span><br><span class="line">创建全为0、全为1的矩阵</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">np.arange(12)</span><br><span class="line"></span><br><span class="line">输出[0, 12)，[ 0  1  2  3  4  5  6  7  8  9 10 11]</span><br><span class="line"></span><br><span class="line">np.arange(1, 2, 0.3)</span><br><span class="line"></span><br><span class="line">1开头 差值为0.3的等差数列，直到小于2</span><br><span class="line">输出 [ 1.   1.3  1.6  1.9]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.linspace(1, 2, 11)</span><br><span class="line"></span><br><span class="line">1开头 2最后，中间11的数字平分,输出：[ 1.   1.1  1.2  1.3  1.4  1.5  1.6  1.7  1.8  1.9  2. ]</span><br></pre></td></tr></table></figure>
<blockquote>
<p>首先定义a、b两个矩阵</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = np.array([[1, 2, 3]</span><br><span class="line">            , [4, 5, 6]])</span><br><span class="line">b = np.array([[2, 1, 0]</span><br><span class="line">            , [1, 1, 1]])</span><br></pre></td></tr></table></figure>
<blockquote>
</blockquote>
<h3 id="维度变换"><a href="#维度变换" class="headerlink" title="维度变换"></a>维度变换</h3><p>shape重定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = np.arange(1, 7).reshape(2, 3)</span><br><span class="line"></span><br><span class="line">上述矩阵a还可以通过reshape改变1维数组为2行3列</span><br><span class="line">[[1 2 3]</span><br><span class="line"> [4 5 6]]</span><br></pre></td></tr></table></figure>
<p>矩阵转置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">c = a.T</span><br><span class="line">c = a.transpose()</span><br><span class="line"></span><br><span class="line">原先2行3列的矩阵变成了3行2列</span><br><span class="line">[[1 4]</span><br><span class="line"> [2 5]</span><br><span class="line"> [3 6]]</span><br></pre></td></tr></table></figure>
<p>水平组合: 要求横轴即1维上的数量相同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">np.hstack((a, b))</span><br><span class="line"></span><br><span class="line"> [[1 2 3 2 1 0]</span><br><span class="line"> [4 5 6 1 1 1]]</span><br></pre></td></tr></table></figure>
<p>垂直组合: 要求纵轴即0维上的数量相同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">np.vstack((a, b))</span><br><span class="line"></span><br><span class="line"> [[1 2 3]</span><br><span class="line"> [4 5 6]</span><br><span class="line"> [2 1 0]</span><br><span class="line"> [1 1 1]]</span><br></pre></td></tr></table></figure>
<p>水平拆分</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">np.hsplit(a, 3)</span><br><span class="line"></span><br><span class="line">[array([[1],[4]]), </span><br><span class="line"> array([[2],[5]]),</span><br><span class="line"> array([[3],[6]])]</span><br></pre></td></tr></table></figure>
<p>垂直拆分</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.vsplit(a, 2)</span><br><span class="line"></span><br><span class="line">[array([[1, 2, 3]]), array([[4, 5, 6]])]</span><br></pre></td></tr></table></figure>
<h3 id="矩阵运算"><a href="#矩阵运算" class="headerlink" title="矩阵运算"></a>矩阵运算</h3><p>矩阵与标量的加减乘除等于矩阵内各元素与标量的加减乘除</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a + 1</span><br><span class="line"></span><br><span class="line">[[2 3 4]</span><br><span class="line"> [5 6 7]]</span><br><span class="line"></span><br><span class="line">a * 2</span><br><span class="line">[[ 2  4  6]</span><br><span class="line"> [ 8 10 12]]</span><br></pre></td></tr></table></figure>
<p>矩阵与矩阵相加，各维度必须一致，相同位置的元素相加，否则报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a + b</span><br><span class="line"></span><br><span class="line">[[3 3 3]</span><br><span class="line"> [5 6 7]]</span><br></pre></td></tr></table></figure>
<p>用dot方法相乘，表示线性代数里的矩阵相乘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">np.dot(a, c)</span><br><span class="line"></span><br><span class="line">[[14 32]</span><br><span class="line"> [32 77]]</span><br><span class="line"> </span><br><span class="line">但是当秩为1时，也是对应位置元素相乘并累加。</span><br></pre></td></tr></table></figure>
<p>用* 或者np.multiply相乘，维度也必须一致，相同位置的元素相乘</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a * b 或者np.multiply(a, b)</span><br><span class="line"></span><br><span class="line">[[2 2 0]</span><br><span class="line"> [4 5 6]]</span><br></pre></td></tr></table></figure>
<p>a, b创建后的类型是type(a) = ‘numpy.ndarray’, 如果显式转换成matrix类型，那么*则是线性代数里的矩阵相乘，通过np.mat(a)转换为’numpy.matrixlib.defmatrix.matrix’。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">np.mat(a) * np.mat(c)</span><br><span class="line"></span><br><span class="line">[[14 32]</span><br><span class="line"> [32 77]]</span><br></pre></td></tr></table></figure>
<p>即:</p>
<p>multiply始终是数乘，相同位置元素相乘</p>
<p>dot始终是矩阵乘法</p>
<p>而*根据数据类型决定如何乘</p>
<h3 id="随机数"><a href="#随机数" class="headerlink" title="随机数"></a>随机数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">np.random.random((2, 3))</span><br><span class="line"></span><br><span class="line">生成[0,1)之间的浮点数</span><br><span class="line">[[ 0.96702984  0.54723225  0.97268436]</span><br><span class="line"> [ 0.71481599  0.69772882  0.2160895 ]]</span><br><span class="line"> </span><br><span class="line">从python源码的注释看，ranf = random = sample = random_sample</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">np.random.rand(2, 4)</span><br><span class="line"></span><br><span class="line">[[ 0.97627445  0.00623026  0.25298236  0.43479153]</span><br><span class="line"> [ 0.77938292  0.19768507  0.86299324  0.98340068]]</span><br><span class="line"></span><br><span class="line">同样生成生成[0,1)之间的浮点数，与random的具体区别不是很清楚，从注释上看rand属于uniform distribution，random属于continuous uniform</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">np.random.randn(2, 4)</span><br><span class="line"></span><br><span class="line">生成标准正态分布样本 0为均值、1为标准差 N(0,1)</span><br><span class="line">[[ 0.33225003 -1.14747663  0.61866969]</span><br><span class="line"> [-0.08798693  0.4250724   0.33225315]]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">np.random.normal(10, 1, (2, 6))</span><br><span class="line"></span><br><span class="line">生成均值为loc，标准差为scale的正态分布矩阵，numpy中很多方法如果size不写则返回一个值</span><br><span class="line">[[  9.43149964   9.05681477  10.55712148   9.97022176  10.41476467]</span><br><span class="line"> [ 10.35518302  10.35732679   9.05575841  12.32206439  10.31706671]]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">np.random.randint(10, 20, size=(2, 5))</span><br><span class="line"></span><br><span class="line">生成[10, 20)之间的随机整数</span><br><span class="line">[[11 10 13 12 13]</span><br><span class="line"> [12 19 12 11 10]]</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">np.random.choice(10, 5, False)</span><br><span class="line"></span><br><span class="line">从[0, 10)选5个不重复的数: [9 6 8 7 5]</span><br><span class="line"></span><br><span class="line">list = [&apos;a&apos;, &apos;b&apos;, &apos;c&apos;, &apos;d&apos;, &apos;e&apos;]</span><br><span class="line">np.random.choice(list, size=(3, 4), replace=True)</span><br><span class="line"></span><br><span class="line">从另一个数组中选择可重复值</span><br><span class="line">[[&apos;c&apos; &apos;b&apos; &apos;c&apos; &apos;d&apos;]</span><br><span class="line"> [&apos;a&apos; &apos;e&apos; &apos;d&apos; &apos;d&apos;]]</span><br></pre></td></tr></table></figure>
<h3 id="索引与切片"><a href="#索引与切片" class="headerlink" title="索引与切片"></a>索引与切片</h3><p>对于一维数组</p>
<p>x = [0 1 2 3 4 5 6 7 8 9]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">x[2] : 1</span><br><span class="line">x[2:5] : [2 3 4]</span><br><span class="line"></span><br><span class="line">甚至还可以用数组当索引</span><br><span class="line">indexs = [2, 3, 4]</span><br><span class="line">(x * 2)[indexs]</span><br><span class="line"></span><br><span class="line">输出[4, 6, 8]</span><br><span class="line"></span><br><span class="line">x[::-1]</span><br><span class="line">x[::-2]</span><br><span class="line">如果第二个冒号后是负数，则数组反转，非-1则类似正数间隔筛选:</span><br><span class="line">x[::-1] = [9 8 7 6 5 4 3 2 1 0]</span><br><span class="line">x[::-2] = [9 7 5 3 1]</span><br></pre></td></tr></table></figure>
<p>对于多维矩阵，每个维度之间用,分隔开，单独用类似于一维数组的方式指定索引</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">print(&apos;a[1] = %s\n&apos; % a[1])</span><br><span class="line">print(&apos;a[1, :] = %s\n&apos; % a[1, :])</span><br><span class="line">print(&apos;a[:, 1] = %s\n&apos; % a[:, 1])</span><br><span class="line">print(&apos;a[1:3, 1:3] = %s\n&apos; % a[1:3, 1:3])</span><br><span class="line"></span><br><span class="line">a[1] = [4 5 6]</span><br><span class="line">a[1, :] = [4 5 6]</span><br><span class="line">a[:, 1] = [2 5]</span><br><span class="line">a[1:3, 1:3] = [[5 6]]</span><br></pre></td></tr></table></figure>
<h3 id="Boolean-Arrays"><a href="#Boolean-Arrays" class="headerlink" title="Boolean Arrays"></a>Boolean Arrays</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">x = np.arange(12).reshape(3,4)</span><br><span class="line">x = x &gt; 4</span><br><span class="line"></span><br><span class="line">[[False False False False]</span><br><span class="line"> [False  True  True  True]</span><br><span class="line"> [ True  True  True  True]]</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">x.any() : 是否有True? True</span><br><span class="line">x.all() : 是否都是True? False</span><br></pre></td></tr></table></figure>
<h3 id="矩阵自身属性"><a href="#矩阵自身属性" class="headerlink" title="矩阵自身属性"></a>矩阵自身属性</h3><p>a.ndim a.shape a.size a.dtype a.itemsize</p>
<p>分别表示：矩阵维数、各维度具体大小、元素总数、元素类型、此类型占用字节数</p>
<p>输出分别是：2  (2, 3) 6 int64 8</p>
<h3 id="其它操作"><a href="#其它操作" class="headerlink" title="其它操作"></a>其它操作</h3><p>求和、最大、最小值、平均值、方差、标准差</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a.sum(), a.min(), a.max(), a.mean(), a.var(), a.std()</span><br><span class="line"></span><br><span class="line">sum=21 min=1 max=6 mean=3.5 var=2.9167 std=1.7078</span><br></pre></td></tr></table></figure>
<p>提取矩阵对角: 如果原来是1维矩阵则转为对角矩阵，否则提取对角线返回1维矩阵</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">np.diag(a)</span><br><span class="line"></span><br><span class="line">[1 5]</span><br><span class="line"></span><br><span class="line">np.diag(np.diag(a))</span><br><span class="line"></span><br><span class="line">[[1 0]</span><br><span class="line"> [0 5]]</span><br></pre></td></tr></table></figure>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>很强大的矩阵操作库，其它还有大量功能待后续继续了解，如concatenate、dstack、column_stack、split、sina、sqrt、cumsum、fromfunction、floor、resize、where等等，还可以通过save、load、savetxt、loadtxt等进行文件读写。</p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://docs.scipy.org/doc/numpy-dev/user/quickstart.html" target="_blank" rel="noopener">https://docs.scipy.org/doc/numpy-dev/user/quickstart.html</a></p>
<p><a href="http://blog.csdn.net/zenghaitao0128/article/details/78715140" target="_blank" rel="noopener">http://blog.csdn.net/zenghaitao0128/article/details/78715140</a></p>
<p><a href="http://codingpy.com/article/an-introduction-to-numpy/" target="_blank" rel="noopener">http://codingpy.com/article/an-introduction-to-numpy/</a></p>


      

    </section>
    
    
</article>

</div>

            <footer>
    <div>© 2016 - qianhk </div>
    <div>
    Powered by Hexo
    </div>
</footer>

        </div>
    </div>
</div>
<script src="/js/pager/dist/singlepager.js"></script>
<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>